<!DOCTYPE html>
<html>
  <head>
    <title>Exemplo de Payload Pix em JavaScript</title>
  </head>
  <body>
    <h1>Exemplo de Payload Pix em JavaScript</h1>

    <script>
      class Payload {
    constructor() {
        this.pixKey = "";
        this.description = "";
        this.merchantName = "";
        this.merchantCity = "";
        this.txid = "";
        this.amount = "";
        this.uniquePayment = false;
        this.url = "";
    }

    static get ID_PAYLOAD_FORMAT_INDICATOR() { return "00"; }
    static get ID_POINT_OF_INITIATION_METHOD() { return "01"; }
    static get ID_MERCHANT_ACCOUNT_INFORMATION() { return "26"; }
    static get ID_MERCHANT_ACCOUNT_INFORMATION_GUI() { return "00"; }
    static get ID_MERCHANT_ACCOUNT_INFORMATION_KEY() { return "01"; }
    static get ID_MERCHANT_ACCOUNT_INFORMATION_DESCRIPTION() { return "02"; }
    static get ID_MERCHANT_ACCOUNT_INFORMATION_URL() { return "25"; }
    static get ID_MERCHANT_CATEGORY_CODE() { return "52"; }
    static get ID_TRANSACTION_CURRENCY() { return "53"; }
    static get ID_TRANSACTION_AMOUNT() { return "54"; }
    static get ID_COUNTRY_CODE() { return "58"; }
    static get ID_MERCHANT_NAME() { return "59"; }
    static get ID_MERCHANT_CITY() { return "60"; }
    static get ID_ADDITIONAL_DATA_FIELD_TEMPLATE() { return "62"; }
    static get ID_ADDITIONAL_DATA_FIELD_TEMPLATE_TXID() { return "05"; }
    static get ID_CRC16() { return "63"; }

    setPixKey(pixKey) {
        this.pixKey = pixKey;
        return this;
    }

    setUniquePayment(uniquePayment) {
        this.uniquePayment = uniquePayment;
        return this;
    }

    setUrl(url) {
        this.url = url;
        return this;
    }

    setDescription(description) {
        this.description = description;
        return this;
    }

    setMerchantName(merchantName) {
        this.merchantName = merchantName;
        return this;
    }

    setMerchantCity(merchantCity) {
        this.merchantCity = merchantCity;
        return this;
    }

    setTxid(txid) {
        this.txid = txid;
        return this;
    }

    setAmount(amount) {
        this.amount = Number.parseFloat(amount).toFixed(2);
        return this;
    }

    getValue(id, value) {
        let size = value.toString().length.toString().padStart(2, "0");
        return id + size + value;
    }

    getMerchantAccountInformation() {
        let gui = this.getValue(Payload.ID_MERCHANT_ACCOUNT_INFORMATION_GUI, "br.gov.bcb.pix");
        let key = (this.pixKey.length > 0) ? this.getValue(Payload.ID_MERCHANT_ACCOUNT_INFORMATION_KEY, this.pixKey) : "";
        let description = (this.description.length > 0) ? this.getValue(Payload.ID_MERCHANT_ACCOUNT_INFORMATION_DESCRIPTION, this.description) : "";
        let url = (this.url.length > 0) ? this.getValue(Payload.ID_MERCHANT_ACCOUNT_INFORMATION_URL, this.url.replace(/^https?:\/\//, "")) : "";
        return this.getValue(Payload.ID_MERCHANT_ACCOUNT_INFORMATION, gui + key + description + url);
    }
}

    </script>
  </body>
</html>
