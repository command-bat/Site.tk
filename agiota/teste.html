<!DOCTYPE html>
<html>
<head>
	<title>Lista do Firebase</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
		}

		h1, h2, h3 {
			background-color: #333;
			height: auto;
			max-height: 150px;
			width: auto;
			max-width: 350px;
			color: #fff;
			padding: 10px;
			margin: 0;
		}

		#emprestimo, #todevendo, #medeve {
			height: auto;
			max-height: 150px;
			width: auto;
			max-width: 350px;
			overflow-y: auto;
			padding: 0;
			margin: 0;
			list-style: none;
		}

		#emprestimo li, #todevendo li, #medeve li {
			padding: 10px;
			border-bottom: 1px solid #ccc;
			cursor: pointer;
		}
	</style>
</head>
<body>
  <h1>Selecione o username<br>para emprestar dinheiro</h1>
  <ul id="emprestimo"></ul>

  <h2>Username de quem esta<br>te devendo dinheiro</h2>
  <ul id="todevendo"></ul>

  <h3>Username de quem vc esta<br>devendo dinheiro</h3>
  <ul id="medeve"></ul>

  <!-- Inclui o SDK do Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
  <script src="js/firebase.js"></script>

 <script>
// Referência do Realtime Database do Firebase
const databaseRef = firebase.database().ref();

// Referência do nó do usuário logado
const currentUserRef = databaseRef.child('users').child(uid);

// Referência do nó de recebimentos do usuário logado
const currentUserRecebRef = currentUserRef.child('receber');

// Referência dos usuários que devem dinheiro para o usuário logado
const usersDevedoresRef = databaseRef.child('users').orderByChild('receber/uid').equalTo(uid);

// Elemento HTML onde será exibida a lista de usuários devedores
const todevendoList = document.getElementById('todevendo');

// Função para exibir a lista de usuários devedores
function exibirDevedores(snapshot) {
  // Limpa a lista de usuários devedores
  todevendoList.innerHTML = '';
  // Itera sobre os usuários devedores
  snapshot.forEach(function(childSnapshot) {
    // Obtém os dados do usuário
    const userData = childSnapshot.val();
    // Exibe o nome do usuário na lista
    const username = document.createElement('li');
    username.textContent = userData.username;
    todevendoList.appendChild(username);
    // Adiciona um listener de clique para exibir o alerta
    username.addEventListener('click', function() {
      alert(`Você emprestou dinheiro para ${userData.username}`);
    });
  });
}

// Adiciona um listener de eventos para a referência dos usuários devedores
usersDevedoresRef.on('value', exibirDevedores);
  </script>
</body>
</html>
