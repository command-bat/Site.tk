<!DOCTYPE html>
<html>
<head>
	<title>Lista de Usernames do Firebase</title>
	<style>
		/* Estilos para o corpo da página */
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
		}

		/* Estilos para o título da página */
		h1 {
			background-color: #333;
			height: auto;
			max-height: 150px;
            		width: auto;
           		max-width: 350px;
			color: #fff;
			padding: 10px;
			margin: 0;
		}

		/* Estilos para a lista de usernames */
		#usernames {
			height: auto;
			max-height: 150px;
            		width: auto;
           		max-width: 350px;
			overflow-y: auto;
			padding: 0;
			margin: 0;
			list-style: none;
		}

		#usernames li {
			padding: 10px;
			border-bottom: 1px solid #ccc;
			cursor: pointer;
		}
	</style>
</head>
<body>
	<h1>Selecione o username<br>para emprestar dinheiro</h1>
	<ul id="usernames"></ul>

	<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
	<script src="js/firebase.js"></script>
	<script>
		// Recuperar os valores do Firebase
		firebase.database().ref('users').orderByChild('username').once('value')
			.then(function(snapshot) {
				// Adicionar os usernames na lista
				var usernames = document.getElementById("usernames");
				snapshot.forEach(function(childSnapshot) {
					var username = childSnapshot.val().username;
					var pix = childSnapshot.val().pix;
					var recVal = childSnapshot.val().inf.receber.valor;
					var listItem = document.createElement("li");
					listItem.innerHTML = username + "|" + recVal;
					listItem.addEventListener('click', function() {
						alert('O pix do usuário ' + username + ' é ' + pix);
					});
					usernames.appendChild(listItem);
				});
				// Adicionar scroll se tiver mais que 5 usernames
				if (usernames.children.length > 5) {
					usernames.style.height = "200px";
					usernames.style.overflow = "auto";
				}
			})
			.catch(function(error) {
				console.log(error);
			});
	</script>
</body>
</html>
